{"content":"\nКонтейнеры по умолчанию живут в своей закрытой сети. Если вы запустите веб-сервер внутри контейнера, снаружи (из вашего браузера) он будет недоступен.\nЧтобы «пробить дыру» в этой изоляции, мы используем публикацию портов (Port Publishing).\n\n## Флаг -p (publish)\n\nСинтаксис: `-p <ПОРТ_НА_ХОСТЕ>:<ПОРТ_В_КОНТЕЙНЕРЕ>`\n\n```bash\ndocker run -d -p 8080:80 nginx\n```\nЗдесь мы говорим: \"Всё, что придет на порт `8080` моего ноутбука, перенаправь на порт `80` внутри контейнера Nginx\".\n\nТеперь сайт доступен по адресу `http://localhost:8080`.\n\n## Важные нюансы\n\n1. **Конфликт портов:**\n   Если вы запустите два контейнера с `-p 8080:80`, второй упадет с ошибкой `Bind for 0.0.0.0:8080 failed: port is already allocated`.\n   Один порт на хосте может слушать только один процесс.\n   **Решение:** Поменяйте внешний порт для второго контейнера: `-p 8081:80`.\n\n2. **UDP протокол:**\n   По умолчанию пробрасывается TCP. Если нужен UDP (например, для DNS или игровых серверов), укажите это явно:\n   ```bash\n   docker run -d -p 53:53/udp my-dns-server\n   ```\n\n3. **Случайный порт (-P):**\n   Если вам лень выбирать свободный порт, можно использовать флаг `-P` (заглавная). Docker сам найдет свободный порт на хосте и привяжет его ко всем `EXPOSE` портам контейнера.\n   Узнать, какой порт он выбрал, можно через `docker port <container_name>`.\n\n## Доступность (0.0.0.0 vs 127.0.0.1)\n\nПо умолчанию `-p 8080:80` открывает порт на адресе `0.0.0.0`. Это значит, что сервис будет доступен **всему интернету** (если у вас \"белый\" IP).\n\nЕсли вы хотите, чтобы сервис был доступен **только с вашего компьютера** (для безопасности), указывайте IP явно:\n\n```bash\n# Доступен только локально\ndocker run -p 127.0.0.1:8080:80 nginx\n```\n\n## Итого\n\nБез флага `-p` ваш контейнер — как подводная лодка: внутри всё работает, но снаружи к нему не подключиться. Всегда проверяйте маппинг портов командой `docker ps`.\n\n"}