{"content":"\n\"Приложение не может подключиться к базе данных\". Это самая частая боль новичков.\n\n## Ошибка 1: Connection Refused (127.0.0.1)\n\n**Ситуация:**\nУ вас в конфиге приложения написано: **DB_HOST=localhost**.\nПриложение внутри контейнера пытается подключиться к **localhost**... и не находит там базы.\n\n**Причина:**\nВнутри контейнера **localhost** — это **сам контейнер**. База данных находится в **другом** контейнере.\n\n**Решение:**\nИспользуйте имя сервиса базы данных как хост: **DB_HOST=postgres** (или как вы назвали сервис в docker-compose).\n\n## Ошибка 2: Host not found (DNS)\n\n**Ситуация:**\nВы пишете **DB_HOST=postgres**, но получаете ошибку **getaddrinfo EAI_AGAIN postgres**.\n\n**Причина:**\nКонтейнеры не находятся в одной пользовательской сети.\nЕсли вы запускали их через **docker run** без флага **--network**, они попали в дефолтный **bridge**, где DNS по именам **не работает**.\n\n**Решение:**\nСоздайте сеть и поместите оба контейнера туда:\n```\ndocker network create my-net\ndocker run --network my-net ... db\ndocker run --network my-net ... app\n```\n(Docker Compose делает это автоматически).\n\n## Ошибка 3: Connection refused (Wrong Port)\n\n**Ситуация:**\n**DB_HOST=postgres**, сеть есть, но соединения нет.\n\n**Причина:**\n1. База еще не успела запуститься (Race Condition). См. урок про **depends_on**.\n2. Вы стучитесь не в тот порт. Postgres — 5432, MySQL — 3306, Redis — 6379.\n3. База настроена слушать только **127.0.0.1** (внутри своего конфига **listen_addresses**). Ей нужно разрешить слушать **0.0.0.0**.\n\n## Диагностика сети из контейнера\n\nУстановите **curl** или **nc** (netcat) внутри контейнера для проверки:\n\n```\ngetent hosts postgres\n\nnc -zv postgres 5432\n```\nЕсли **nc** пишет **Open**, значит сеть работает, и проблема в логике приложения (неверный пароль, имя базы).\n\n## Итого\n\nЗабудьте слово **localhost** внутри контейнеров (если только вы не обращаетесь к процессу в *этом же* контейнере). Используйте имена сервисов.\n"}