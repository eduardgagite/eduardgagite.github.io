{"content":"\nЧто будет, если в вашем приложении утечка памяти? Оно съест всю оперативку сервера.\nLinux начнет убивать процессы (OOM Killer), и под раздачу может попасть не виновник, а база данных или SSH-демон. Сервер \"умрет\".\n\nDocker позволяет жестко ограничить аппетиты контейнеров.\n\n## Ограничение памяти\n\n```bash\n# Жесткий лимит: 512 МБ\ndocker run -d --memory=\"512m\" nginx\n```\nЕсли Nginx попытается потребить 513 МБ, ядро Linux мгновенно убьет этот контейнер (OOM Killed), но остальная система не пострадает.\n\n## Ограничение CPU\n\n```bash\n# Дать контейнеру не более 50% от одного ядра\ndocker run -d --cpus=\"0.5\" nginx\n```\n\n## Настройка в Docker Compose\n\nВ `docker-compose.yml` (версия 3+) это делается в секции `deploy`:\n\n```yaml\nservices:\n  web:\n    image: nginx\n    deploy:\n      resources:\n        limits:\n          cpus: '0.50'\n          memory: 512M\n        reservations: # Гарантированный минимум\n          cpus: '0.25'\n          memory: 128M\n```\n\n*Примечание: для применения секции `deploy` в обычном `docker-compose` (не Swarm) может потребоваться флаг `--compatibility`, хотя в современных версиях V2 это часто работает из коробки.*\n\n## Итого\n\nВсегда ставьте лимиты памяти (`memory`) для Java и Node.js приложений. Они любят потреблять всё доступное пространство. Лимиты спасут ваш сервер от полного зависания.\n\n"}