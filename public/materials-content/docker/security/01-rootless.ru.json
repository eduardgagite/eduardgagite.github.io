{"content":"\nПо умолчанию процессы в контейнере работают от имени **root**.\nЭто значит, что если злоумышленник взломает ваше Node.js приложение (например, через уязвимость в npm-пакете) и сможет выбраться из контейнера (container breakout), он окажется на вашем сервере с правами root. Это катастрофа.\n\n## Решение: USER в Dockerfile\n\nВсегда создавайте и используйте обычного пользователя внутри Dockerfile.\n\n```\nFROM node:18-alpine\n\nWORKDIR /app\n\nCOPY . .\n\nRUN chown -R node:node /app\n\nUSER node\n\nCMD [\"node\", \"index.js\"]\n```\n\n## Проверка\n\nЗапустите контейнер и проверьте, кто вы:\n\n```\ndocker exec my-app whoami\n```\n\n## Ограничение портов\n\nОбычный пользователь (не root) не может слушать порты ниже 1024 (например, 80 или 443).\nПоэтому внутри контейнера ваше приложение должно слушать порт 3000 или 8080.\nА уже снаружи через Docker вы можете пробросить его на 80-й порт: **-p 80:3000**.\n\n## Итого\n\nНикогда не запускайте продакшен-сервисы от root. Добавьте инструкцию **USER** в свой Dockerfile. Это одна строчка, которая закрывает огромную дыру в безопасности.\n"}