{"content":"\nСамый частый кейс использования Volumes — это базы данных.\nДавайте запустим Postgres так, чтобы данные не пропали после удаления контейнера.\n\n## 1. Запуск без тома (ОШИБКА)\n\n```\ndocker run -d --name pg-test -e POSTGRES_PASSWORD=secret postgres\n```\n\nЕсли вы сейчас создадите таблицу, а потом сделаете **docker rm -f pg-test**, данные исчезнут навсегда. Потому что Postgres хранит данные в папке **/var/lib/postgresql/data** **внутри** контейнера.\n\n## 2. Запуск с именованным томом (ПРАВИЛЬНО)\n\nСоздадим том:\n\n```\ndocker volume create pg-data\n```\n\nЗапустим контейнер, подключив этот том:\n\n```\ndocker run -d \\\n  --name pg-prod \\\n  -e POSTGRES_PASSWORD=secret \\\n  -v pg-data:/var/lib/postgresql/data \\\n  postgres\n```\n\nТеперь:\n1. Зайдите в контейнер, создайте таблицу.\n2. Удалите контейнер: **docker rm -f pg-prod**.\n3. Запустите новый контейнер с **тем же томом** (**-v pg-data:...**).\n4. Вуаля! Ваши данные на месте.\n\n## Как посмотреть список томов\n\n```\ndocker volume ls\n```\n\n## Как очистить неиспользуемые тома\n\nТома не удаляются автоматически, когда вы удаляете контейнер (чтобы вы случайно не потеряли данные).\nСо временем они накапливаются.\n\nУдалить конкретный том:\n\n```\ndocker volume rm pg-data\n```\n\n⚠️ **Внимание:** Это необратимо удалит все данные базы!\n\nОчистить все \"повисшие\" тома (которые не подключены ни к одному контейнеру):\n\n```\ndocker volume prune\n```\n\n## Итого\n\nДля любой базы данных (Postgres, MySQL, Mongo, Redis) **всегда** создавайте отдельный Volume. Это ваша страховка от потери данных.\n"}