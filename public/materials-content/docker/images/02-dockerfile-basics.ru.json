{"content":"\nЧтобы создать свой образ, нам нужна инструкция. Эта инструкция пишется в файле с названием `Dockerfile` (без расширения).\n\nДавайте напишем Dockerfile для простого Node.js приложения.\n\n## Пример Dockerfile\n\n```dockerfile\n# 1. Базовый образ\nFROM node:18-alpine\n\n# 2. Рабочая директория внутри контейнера\nWORKDIR /app\n\n# 3. Копируем файлы зависимостей\nCOPY package.json package-lock.json ./\n\n# 4. Устанавливаем зависимости\nRUN npm ci\n\n# 5. Копируем исходный код\nCOPY . .\n\n# 6. Объявляем порт (информативно)\nEXPOSE 3000\n\n# 7. Команда запуска\nCMD [\"node\", \"index.js\"]\n```\n\n## Разбор команд\n\n### FROM\nС чего начинаем. Всегда первая команда.\n`FROM ubuntu:22.04` или `FROM python:3.9-slim`.\n\n### WORKDIR\nЗадает текущую папку внутри контейнера.\nВсе последующие команды (`COPY`, `RUN`, `CMD`) будут выполняться в ней.\nЕсли папки нет, она создастся.\n**Совет:** Всегда используйте `WORKDIR`, не работайте в корне `/`.\n\n### COPY\nКопирует файлы **с вашего компьютера** (хоста) **в контейнер**.\nСинтаксис: `COPY <откуда> <куда>`.\n`COPY . .` означает \"скопировать всё из текущей папки проекта в текущую папку контейнера (`WORKDIR`)\".\n\n### RUN\nВыполняет команду **во время сборки** образа.\nРезультат выполнения сохраняется в слое образа.\nИспользуется для установки пакетов (`npm install`, `pip install`, `apt-get update`).\n\n### CMD\nКоманда, которая выполнится **при запуске контейнера** (`docker run`).\nВ Dockerfile может быть только одна инструкция `CMD` (точнее, сработает только последняя).\n\n## Как собрать образ\n\nКогда Dockerfile готов, мы запускаем сборку командой `build`:\n\n```bash\n# -t my-app: ставим тег (имя) образу\n# . : путь к папке с Dockerfile (текущая папка)\ndocker build -t my-app .\n```\n\nDocker прочитает файл сверху вниз, выполнит каждую инструкцию и создаст итоговый образ `my-app`.\n\n## Итого\n\n1. `FROM` — база.\n2. `WORKDIR` — перешли в папку.\n3. `COPY` — закинули файлы.\n4. `RUN` — установили библиотеки.\n5. `CMD` — сказали, как запускать.\n\n"}