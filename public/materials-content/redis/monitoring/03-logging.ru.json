{"content":"\nПомимо команд INFO и SLOWLOG, много ценной информации о работе **Redis** можно получить из обычных логов сервера. Они помогают понять, когда сервер перезапускался, были ли ошибки при сохранении snapshot, как ведёт себя репликация и что происходило перед аварией.\n\nВажно правильно настроить, куда пишет Redis, какой уровень логирования использовать и как забирать эти данные в централизованную систему.\n\n## Куда пишет Redis: logfile и syslog\n\nОсновные параметры логирования:\n\n```\nlogfile \"\"\nsyslog-enabled no\nsyslog-ident redis\nsyslog-facility local0\n```\n\nЕсли **logfile** пустой, Redis пишет логи в stdout/stderr — это удобно для контейнеров и систем, где логи собирает оркестратор.\n\nЕсли нужно писать в файл:\n\n```\nlogfile \"/var/log/redis/redis-server.log\"\n```\n\nВ продакшене чаще всего:\n\n- или оставляют вывод в stdout и забирают его средствами платформы;\n- или пишут в файл и ротируют через logrotate.\n\n## Уровень логирования\n\nЗа уровень отвечает параметр **loglevel**.\n\nВарианты:\n\n```\nloglevel notice\n```\n\nДоступные уровни:\n\n- debug — максимально подробные логи (только для отладки на dev);\n- verbose — расширенная информация;\n- notice — разумный уровень по умолчанию;\n- warning — только предупреждения и ошибки.\n\nДля продакшена обычно достаточно **notice** или, при очень чувствительном диске, **warning**. Для отладки сложных проблем можно временно включить **verbose** или **debug**, но не оставлять так надолго.\n\n## Что искать в логах\n\nТипичные вещи, которым стоит уделять внимание:\n\n- сообщения о запуске и остановке сервера;\n- ошибки сохранения RDB или записи AOF;\n- предупреждения о блокирующих операциях;\n- события, связанные с репликацией и Sentinel;\n- сообщения о переполнении памяти и срабатывании политик вытеснения.\n\nПримеры:\n\n- ошибки BGSAVE;\n- предупреждения о частых полных синхронизациях реплик;\n- записи о failover при использовании Sentinel.\n\nИмея централизованный сбор логов, легко построить алерты на появление критичных сообщений.\n\n## Интеграция с внешним мониторингом\n\nЧасто логи Redis отправляют в:\n\n- системные журналы (journald, syslog);\n- централизованные стеки (ELK, Loki, Cloud Logging);\n- системы алертинга (через парсинг логов).\n\nОбщий подход:\n\n- настроить единый формат логов;\n- добавить метки окружения и инстанса;\n- фильтровать только важные сообщения для алертов.\n\nНа практике это позволяет быстро ответить на вопросы вида «что случилось с Redis в момент X» без подключения к серверу по SSH.\n\n## Итог\n\nЛоги **Redis** дополняют INFO и SLOWLOG: они показывают историю событий сервера — от перезапусков и ошибок snapshot до проблем с репликацией и памятью.\n\nЕсли настроить удобный вывод логов, выбрать адекватный loglevel и собрать их в централизованную систему, поиск причин сбоев и странного поведения Redis становится гораздо проще и быстрее.\n\n\n"}