---
title: "Модули и зависимости"
category: "golang"
categoryTitle: "Go"
section: "packages-modules"
sectionTitle: "Пакеты и модули"
sectionOrder: 4
order: 2
---

Раньше в Go управление зависимостями было болью (GOPATH). Сейчас всё просто благодаря **Go Modules**.

Модуль — это коллекция пакетов, у которой есть версии. Обычно один репозиторий на GitHub = один модуль.

## Файл go.mod

Сердце модуля — файл `go.mod` в корне проекта. В нём написано:
1. Имя модуля (обычно URL репозитория).
2. Версия Go.
3. Список всех библиотек, которые вы используете (прямые зависимости).

Пример `go.mod`:
```go
module github.com/myname/myproject

go 1.22

require (
    github.com/google/uuid v1.6.0
    github.com/gin-gonic/gin v1.9.1
)
```

В пару к нему всегда идет файл `go.sum`. В нём хранятся контрольные суммы (хеши) всех скачанных библиотек. Это гарантирует, что никто не подменит код библиотеки на вредоносный. **Никогда не трогайте go.sum руками**, но всегда коммитьте его в Git.

## Основные команды

### 1. Инициализация (Start)

Когда создаете новый проект:

```bash
mkdir myapp
cd myapp
go mod init github.com/myname/myapp
```

### 2. Добавление библиотеки

Просто используйте библиотеку в коде или выполните `go get`.

```bash
go get github.com/google/uuid
```

Эта команда:
1. Скачает библиотеку.
2. Добавит её в `go.mod`.
3. Добавит хеш в `go.sum`.

### 3. Наведение порядка (Tidy)

Самая полезная команда. Она сканирует ваш код и:
- Добавляет в `go.mod` то, что вы использовали, но забыли добавить.
- Удаляет из `go.mod` то, что вы перестали использовать.

```bash
go mod tidy
```
Запускайте её перед каждым коммитом.

## Обновление зависимостей

Чтобы обновить библиотеку до последней версии:

```bash
go get -u github.com/package/name
```

## Итог

1. **go mod init** — старт нового проекта.
2. **go get** — установка библиотеки.
3. **go mod tidy** — очистка мусора и фиксация зависимостей.
4. **go.mod** и **go.sum** нужно коммитить в репозиторий.
