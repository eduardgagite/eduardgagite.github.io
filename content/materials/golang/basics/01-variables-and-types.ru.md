---
title: "Переменные и типы"
category: "golang"
categoryTitle: "Go"
section: "basics"
sectionTitle: "Базовые конструкции"
sectionOrder: 2
order: 1
---

Go — язык со строгой статической типизацией. Это значит, что тип каждой переменной известен при компиляции, и вы не можете случайно сложить число со строкой. Такой подход избавляет от целого класса глупых ошибок, которые часто возникают в динамических языках (JS, Python).

Разберёмся, как объявлять переменные и какие базовые типы есть в языке.

## Объявление переменных

Есть два основных способа создать переменную.

### 1. Полная форма (var)

Используется ключевое слово `var`. Подходит, когда нужно объявить переменную заранее, но присвоить значение позже, или когда вы хотите явно указать тип.

```go
var username string = "admin"
var age int
```

### 2. Краткая форма (:=)

Самый частый способ. Работает **только внутри функций**. Тип переменной определяется автоматически (выводится из значения справа).

```go
func main() {
    count := 10          // int
    name := "Gopher"     // string
    isActive := true     // bool
}
```

**Важно**: Переменная, созданная через `:=`, должна быть новой. Если вы попытаетесь повторно объявить её так же, компилятор выдаст ошибку `no new variables on left side of :=`.

## Нулевые значения (Zero Values)

В Go нет понятия «неинициализированная переменная» (мусора в памяти). Если вы объявили переменную, но не присвоили ей значение, она автоматически получает **нулевое значение** для своего типа:

- `0` для чисел (`int`, `float64`)
- `false` для булевых (`bool`)
- `""` (пустая строка) для строк (`string`)
- `nil` для указателей, интерфейсов, карт, срезов и каналов

Пример:
```go
var price int
fmt.Println(price) // Выведет 0
```

Это гарантирует предсказуемость: программа не упадёт из-за чтения случайного куска памяти.

## Базовые типы данных

В Go набор типов лаконичен и стандартен:

- **bool**: `true` или `false`.
- **string**: Строки в Go — это неизменяемые последовательности байтов (UTF-8).
- **int**: Целое число. Размер зависит от платформы (32 или 64 бита), обычно используют именно его.
- **int64**: Явное 64-битное число (нужно, например, для timestamp или больших ID).
- **float64**: Число с плавающей точкой (стандарт для дробных чисел).

## Преобразование типов

Go **никогда** не делает неявного приведения типов. Даже если это кажется очевидным.

```go
var a int = 10
var b int64 = 20

// ОШИБКА: invalid operation: a + b (mismatched types int and int64)
// c := a + b 

// ПРАВИЛЬНО: явное приведение
c := int64(a) + b
```

Чтобы сделать из числа строку или наоборот, используют пакеты стандартной библиотеки (например, `strconv`), а не просто приведение типов.

## Константы

Константы объявляются через `const`. Они могут быть только числами, строками или булевыми значениями. Их значение должно быть известно на этапе компиляции.

```go
const Pi = 3.14
const AppName = "MyService"
```

### Зачем использовать константы?

1. **Читаемость и смысл**. Магическое число `86400` в коде ничего не говорит, а `const SecondsInDay = 86400` сразу объясняет суть.
2. **Защита от изменений**. Если значение не должно меняться (как число Пи или URL базы данных), объявление его константой гарантирует, что вы случайно не перезапишете его где-то в середине функции.
3. **Оптимизация компилятора**. Поскольку значение известно заранее, компилятор может подставить его напрямую в места использования, что немного быстрее, чем чтение из памяти переменной.
4. **Нетипизированность**. В Go константы могут быть *нетипизированными*. Это значит, что числовая константа (например, `10`) может вести себя и как `int`, и как `float64` в зависимости от контекста.

```go
const Timeout = 5 // Нетипизированная константа

var t int = Timeout       // OK: 5 интерпретируется как int
var f float64 = Timeout   // OK: 5 интерпретируется как float64
```

Если бы `Timeout` была обычной переменной типа `int`, во второй строке возникла бы ошибка компиляции (нужно было бы писать `float64(Timeout)`).

### Когда использовать

Используйте `const` для любых значений, которые известны до запуска программы и не меняются: настройки таймаутов, математические коэффициенты, фиксированные сообщения ошибок.

## Итог

- Используйте `:=` внутри функций для краткости.
- Если переменная не инициализирована, она равна **Zero Value** (0, false, "").
- Используйте `const` для значений, которые не меняются. Это безопаснее и удобнее (не нужно явное приведение типов для чисел).
- Go строг к типам: `int` и `int64` — разные типы, их нельзя просто так сложить без явного приведения `int64(val)`.
