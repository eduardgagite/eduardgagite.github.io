---
title: "Структуры и методы"
category: "golang"
categoryTitle: "Go"
section: "data-structures"
sectionTitle: "Структуры данных"
sectionOrder: 3
order: 3
---

В Go нет классов (как в Java или Python). Вместо них используются **структуры** (structs). Это пользовательский тип данных, который позволяет объединить несколько полей под одним именем.

Если вы хотите описать "Пользователя", у которого есть имя, возраст и email, вам нужна структура.

## Объявление структуры

```go
type User struct {
    Name  string
    Age   int
    Email string
}
```

## Создание экземпляра

```go
func main() {
    // 1. Указываем поля по именам (самый частый способ)
    u1 := User{
        Name:  "Alice",
        Age:   30,
        Email: "alice@example.com",
    }

    // 2. Частичное заполнение (остальные поля будут Zero Values)
    u2 := User{Name: "Bob"} // Age будет 0, Email будет ""

    fmt.Println(u1.Name) // Alice
    u2.Age = 25          // Изменение поля
}
```

## Методы

В Go вы можете научить свои структуры что-то делать. Функция, которая "прикреплена" к конкретному типу, называется **методом**.

Синтаксис похож на обычную функцию, но перед именем добавляется **receiver** (получатель) в скобках.

```go
// Метод, привязанный к типу User
func (u User) PrintInfo() {
    fmt.Printf("User: %s, Age: %d\n", u.Name, u.Age)
}

func main() {
    bob := User{Name: "Bob", Age: 25}
    
    // Вызов метода через точку
    bob.PrintInfo()
}
```

## Value Receiver vs Pointer Receiver

Это критически важный момент. Когда вы пишете метод, у вас есть выбор:
1. `func (u User)` — копия значения.
2. `func (u *User)` — указатель на оригинал.

### 1. Value Receiver (Копия)

```go
func (u User) SetAge(newAge int) {
    u.Age = newAge // Мы меняем КОПИЮ User, а не оригинал!
}

bob.SetAge(100)
fmt.Println(bob.Age) // Останется 25. Изменения потеряны.
```

Такой получатель используют, если метод **не меняет** данные (только читает), и структура небольшая.

### 2. Pointer Receiver (Указатель)

Если метод должен **изменить** данные внутри структуры, обязательно используйте звездочку `*`.

```go
func (u *User) SetAgeReal(newAge int) {
    u.Age = newAge // Теперь мы меняем оригинал
}

bob.SetAgeReal(100)
fmt.Println(bob.Age) // Теперь 100!
```

**Правило большого пальца**: Если сомневаетесь, используйте указатель `*User`. Это безопаснее (вы точно измените данные, если захотите) и быстрее (не нужно копировать всю структуру при вызове).

## Конструкторы

В Go нет встроенных конструкторов (как `__init__` или `constructor`). Вместо этого принято писать обычные функции, которые начинаются с `New...`.

```go
func NewUser(name string, email string) *User {
    return &User{
        Name:  name,
        Email: email,
        Age:   18, // Дефолтное значение
    }
}

// Использование
user := NewUser("John", "john@mail.com")
```

## Итог

1. **Структура** объединяет данные (поля).
2. **Методы** добавляют поведение.
3. Если метод должен менять поля структуры — используйте **указатель** `(u *User)`.
4. Вместо классов используйте функции-конструкторы `New...`.
