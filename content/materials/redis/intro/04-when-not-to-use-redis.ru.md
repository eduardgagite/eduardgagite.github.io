---
title: "Когда НЕ использовать Redis"
category: "redis"
categoryTitle: "Redis"
section: "intro"
sectionTitle: "Введение"
sectionOrder: 1
order: 4
---

Redis — отличный инструмент для многих задач, но он не универсален. Есть ситуации, где его использование будет неэффективным, рискованным или просто неправильным выбором. Понимание ограничений помогает избежать проблем и выбрать подходящий инструмент с самого начала.

## Когда данные должны быть строго персистентными

Redis хранит данные в памяти. Хотя есть механизмы сохранения на диск (RDB и AOF), они не гарантируют нулевую потерю данных при сбое. Между снимками или записями в лог возможна потеря последних изменений.

**Не используйте Redis, если:**

- потеря даже нескольких секунд данных критична (финансовые транзакции, медицинские записи);
- требуется строгая гарантия ACID с немедленной записью на диск;
- данные должны быть надёжно сохранены даже при внезапном отключении питания.

**Лучше выбрать:** PostgreSQL, MySQL, другие реляционные БД с гарантиями персистентности.

## Когда нужны сложные запросы и связи

Redis — это хранилище «ключ–значение» с простыми структурами данных. Здесь нет JOIN, сложных фильтров, агрегаций, полнотекстового поиска по содержимому.

**Не используйте Redis, если:**

- нужно делать запросы вроде «найти всех пользователей из города X, которые купили товар Y за последний месяц»;
- важны связи между сущностями (один ко многим, многие ко многим);
- требуется сложная аналитика с группировками и вычислениями.

**Лучше выбрать:** PostgreSQL для реляционных данных, MongoDB для документной модели, Elasticsearch для поиска и аналитики.

## Когда данных больше, чем доступной памяти

Redis держит все данные в оперативной памяти. Если объём данных превышает доступную RAM, Redis либо начнёт вытеснять ключи (если настроена политика eviction), либо перестанет принимать записи.

**Не используйте Redis, если:**

- нужно хранить терабайты данных, а доступной памяти недостаточно;
- данные редко используются, но должны быть доступны (архивы, старые логи);
- стоимость RAM становится неподъёмной для объёма данных.

**Лучше выбрать:** PostgreSQL, MongoDB, Cassandra — системы, которые умеют работать с диском и эффективно использовать память как кэш.

## Когда нужны транзакции с изоляцией

В Redis есть команды MULTI/EXEC, но они не дают полной изоляции транзакций, как в реляционных БД. Нет блокировок на уровне строк, нет уровней изоляции, нет автоматического отката при конфликтах.

**Не используйте Redis, если:**

- критичны транзакции с гарантией изоляции (например, перевод денег между счетами);
- нужно предотвратить чтение «грязных» данных во время транзакции;
- важна консистентность при одновременных изменениях нескольких связанных сущностей.

**Лучше выбрать:** PostgreSQL, MySQL с поддержкой транзакций и уровнями изоляции.

## Когда нужна репликация с записью на несколько узлов

Redis поддерживает репликацию, но запись идёт только на master. Реплики работают в режиме только чтения. Нет встроенной поддержки multi-master репликации, где можно писать на любой узел.

**Не используйте Redis, если:**

- нужна запись на несколько узлов одновременно с автоматической синхронизацией;
- важна географическая распределённость с записью в разных регионах;
- требуется сложная схема репликации с конфликт-резолюцией.

**Лучше выбрать:** Cassandra, MongoDB с multi-master, распределённые системы с поддержкой записи на несколько узлов.

## Когда нужны большие значения или сложные структуры

Хотя Redis поддерживает разные структуры данных, работа с очень большими значениями (мегабайты и больше) может быть неэффективной. Большие операции блокируют сервер и замедляют работу других клиентов.

**Не используйте Redis, если:**

- нужно хранить большие файлы, изображения, видео;
- значения регулярно превышают несколько мегабайт;
- важна эффективная работа с большими бинарными данными.

**Лучше выбрать:** объектные хранилища (S3, MinIO), файловые системы, специализированные хранилища для больших данных.

## Когда нужна строгая безопасность и аудит

Redis изначально создавался для доверенных сред. Хотя есть механизмы безопасности (ACL, TLS), они не так развиты, как в специализированных БД.

**Не используйте Redis, если:**

- требуется детальный аудит всех операций с данными;
- нужны строгие политики доступа на уровне строк или полей;
- важна соответствие строгим стандартам безопасности (HIPAA, PCI-DSS) без дополнительных слоёв.

**Лучше выбрать:** PostgreSQL с расширениями для аудита, специализированные БД с встроенными механизмами безопасности.

## Когда нагрузка в основном на запись

Redis оптимизирован для быстрого чтения. При очень высокой нагрузке на запись (десятки тысяч записей в секунду с большими значениями) может возникнуть узкое место, особенно если включена персистентность.

**Не используйте Redis, если:**

- основная нагрузка — запись больших объёмов данных (логирование, метрики);
- нужна эффективная запись на диск без влияния на производительность;
- важнее пропускная способность записи, чем скорость чтения.

**Лучше выбрать:** специализированные системы для логов (Kafka, ClickHouse), временные ряды БД (InfluxDB, TimescaleDB).

## Итого

**Redis — отличный выбор для кэширования, сессий, счётчиков, очередей и быстрого доступа к данным в памяти.** Но он не заменяет реляционные БД для сложных запросов, не подходит для строгих транзакций и не справляется с данными, которые не помещаются в память.

Главное правило: **используйте Redis там, где важна скорость доступа к данным в памяти, а не там, где нужны сложные запросы, строгая персистентность или огромные объёмы данных.** Правильный выбор инструмента зависит от конкретных требований задачи, а не от популярности технологии.

