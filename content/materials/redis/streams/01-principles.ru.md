---
title: "Принципы работы"
category: "redis"
categoryTitle: "Redis"
section: "streams"
sectionTitle: "Redis Streams"
sectionOrder: 4
order: 1
---

**Streams** в Redis — это структура для работы с последовательностями событий, похожая на журнал или ленту сообщений. Каждая запись в потоке имеет уникальный идентификатор и набор полей с данными. Это удобно для задач, где нужно фиксировать события в порядке их появления: логи, уведомления, обработка задач. В отличие от списков, потоки поддерживают группы потребителей, что позволяет нескольким сервисам читать и обрабатывать данные независимо, без дубликатов.

**Streams** решают проблему, когда события нужно не просто хранить, а распределять между обработчиками. Например, в системе мониторинга события о ошибках могут идти в поток, а разные сервисы — анализировать их параллельно.

## Структура потока

Поток — это цепочка записей, где каждая имеет ID в формате &quot;время-序数&quot;. ID генерируется автоматически, если не указать вручную. Каждая запись — это набор ключ-значение, как мини-хеш.

Создаём поток и добавляем первую запись:

```
XADD events:log * type &quot;error&quot; message &quot;Server down&quot;
```

Команда вернёт ID, например, 1234567890-0. Теперь в потоке есть запись с полями type и message.

Это работает быстро, потому что Redis просто добавляет запись в конец, без перестройки структуры.

## Отличия от других структур

В списках можно добавлять и читать, но нет поддержки групп и подтверждений. **Streams** добавляют это, чтобы избежать потери сообщений: обработчик может подтвердить, что событие взято в работу.

Потоки не удаляют записи автоматически, они остаются для истории или повторной обработки.

## Итог

**Streams** — мощный инструмент для работы с потоками событий, где важны порядок, распределение и надёжность. Они позволяют строить системы вроде очередей или логов без внешних брокеров. **Главное преимущество — простота и скорость Redis в сочетании с механизмами доставки сообщений.**


