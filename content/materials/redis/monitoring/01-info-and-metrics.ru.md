---
title: "Основные метрики и команда INFO"
category: "redis"
categoryTitle: "Redis"
section: "monitoring"
sectionTitle: "Мониторинг и отладка"
sectionOrder: 10
order: 1
---

Для нормальной эксплуатации **Redis** важно не только писать и читать данные, но и понимать, как чувствует себя сервер: хватает ли памяти, не зашкаливает ли число подключений, нет ли проблем с репликацией. Базовый инструмент для этого — команда **INFO**.

Через INFO можно быстро посмотреть ключевые метрики и на их основе настроить мониторинг в Prometheus, Grafana и других системах.

## Команда INFO по разделам

В самом простом виде:

```
INFO
```

Redis вернёт большой блок текста, разбитый на разделы: Server, Clients, Memory, Persistence, Stats, Replication и так далее.

Можно запрашивать конкретный раздел:

```
INFO memory
INFO stats
INFO replication
```

Это удобнее для автоматического сбора метрик и для быстрой диагностики проблем в конкретной области.

## Важные метрики памяти

Раздел **memory** помогает оценить, сколько ресурсов реально съедает Redis.

Пример:

```
INFO memory
```

Ключевые поля:

- used_memory — сколько памяти реально занято под данные и структуры Redis;
- used_memory_rss — сколько памяти занят процесс в системе (с учётом фрагментации);
- maxmemory — лимит памяти, если он настроен;
- mem_fragmentation_ratio — отношение RSS к used_memory, показывает уровень фрагментации.

На практике:

- если used_memory близко к maxmemory, скоро начнут работать политики вытеснения;
- если mem_fragmentation_ratio сильно больше 1, есть смысл расследовать фрагментацию и настройки аллокатора.

## Общие статистики и нагрузка

Раздел **stats** даёт представление о том, насколько активно используется Redis.

Пример:

```
INFO stats
```

Полезные поля:

- total_commands_processed — сколько команд всего обработано;
- instantaneous_ops_per_sec — текущий QPS (команды в секунду);
- keyspace_hits и keyspace_misses — попадания и промахи по ключам;
- expired_keys — сколько ключей было удалено по TTL.

Эти метрики хорошо подходят:

- для графиков нагрузки во времени;
- для понимания эффективности кэша (по hit/miss);
- для оценки того, сколько ключей реально живёт за счёт TTL.

## Клиенты и соединения

Раздел **clients** помогает увидеть, сколько подключений открыто и нет ли «утечек» клиентов.

Пример:

```
INFO clients
```

Смотрим:

- connected_clients — число активных соединений;
- blocked_clients — сколько клиентов сейчас заблокировано (например, на BLPOP или командах, ожидающих данных).

Если connected_clients растёт без остановки или часто достигает лимитов, стоит:

- проверить, правильно ли приложения закрывают подключения;
- настроить пулы соединений;
- при необходимости увеличить лимиты и ресурсы.

## Итог

Команда **INFO** — центральный инструмент быстрой диагностики и базового мониторинга Redis: через неё можно увидеть память, нагрузку, клиентов и состояние репликации.

Если регулярно смотреть на ключевые поля и вытащить их в систему мониторинга, многие проблемы с Redis становятся заметны задолго до того, как превратятся в реальные аварии.


