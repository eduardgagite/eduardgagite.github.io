---
title: "Логи Redis и настройки логирования"
category: "redis"
categoryTitle: "Redis"
section: "monitoring"
sectionTitle: "Мониторинг и отладка"
sectionOrder: 10
order: 3
---

Помимо команд INFO и SLOWLOG, много ценной информации о работе **Redis** можно получить из обычных логов сервера. Они помогают понять, когда сервер перезапускался, были ли ошибки при сохранении snapshot, как ведёт себя репликация и что происходило перед аварией.

Важно правильно настроить, куда пишет Redis, какой уровень логирования использовать и как забирать эти данные в централизованную систему.

## Куда пишет Redis: logfile и syslog

Основные параметры логирования:

```
logfile ""
syslog-enabled no
syslog-ident redis
syslog-facility local0
```

Если **logfile** пустой, Redis пишет логи в stdout/stderr — это удобно для контейнеров и систем, где логи собирает оркестратор.

Если нужно писать в файл:

```
logfile "/var/log/redis/redis-server.log"
```

В продакшене чаще всего:

- или оставляют вывод в stdout и забирают его средствами платформы;
- или пишут в файл и ротируют через logrotate.

## Уровень логирования

За уровень отвечает параметр **loglevel**.

Варианты:

```
loglevel notice
```

Доступные уровни:

- debug — максимально подробные логи (только для отладки на dev);
- verbose — расширенная информация;
- notice — разумный уровень по умолчанию;
- warning — только предупреждения и ошибки.

Для продакшена обычно достаточно **notice** или, при очень чувствительном диске, **warning**. Для отладки сложных проблем можно временно включить **verbose** или **debug**, но не оставлять так надолго.

## Что искать в логах

Типичные вещи, которым стоит уделять внимание:

- сообщения о запуске и остановке сервера;
- ошибки сохранения RDB или записи AOF;
- предупреждения о блокирующих операциях;
- события, связанные с репликацией и Sentinel;
- сообщения о переполнении памяти и срабатывании политик вытеснения.

Примеры:

- ошибки BGSAVE;
- предупреждения о частых полных синхронизациях реплик;
- записи о failover при использовании Sentinel.

Имея централизованный сбор логов, легко построить алерты на появление критичных сообщений.

## Интеграция с внешним мониторингом

Часто логи Redis отправляют в:

- системные журналы (journald, syslog);
- централизованные стеки (ELK, Loki, Cloud Logging);
- системы алертинга (через парсинг логов).

Общий подход:

- настроить единый формат логов;
- добавить метки окружения и инстанса;
- фильтровать только важные сообщения для алертов.

На практике это позволяет быстро ответить на вопросы вида «что случилось с Redis в момент X» без подключения к серверу по SSH.

## Итог

Логи **Redis** дополняют INFO и SLOWLOG: они показывают историю событий сервера — от перезапусков и ошибок snapshot до проблем с репликацией и памятью.

Если настроить удобный вывод логов, выбрать адекватный loglevel и собрать их в централизованную систему, поиск причин сбоев и странного поведения Redis становится гораздо проще и быстрее.


