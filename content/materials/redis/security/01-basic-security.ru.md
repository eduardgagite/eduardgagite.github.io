---
title: "Базовая защита Redis"
category: "redis"
categoryTitle: "Redis"
section: "security"
sectionTitle: "Безопасность"
sectionOrder: 9
order: 1
---

По умолчанию **Redis** настроен скорее для доверенной среды: локальная разработка, внутренняя сеть, отсутствие прямого доступа из интернета. В продакшене такой подход опасен — сервер может стать открытым для всех, кто видит его порт.

Начинать защиту Redis стоит с трёх вещей: сетевые ограничения, базовая аутентификация и отключение лишних команд в уязвимой среде.

## Сетевые ограничения: bind и protected-mode

Первый слой — не давать лишнего сетевого доступа к Redis.

Типичная безопасная настройка:

```
bind 127.0.0.1
protected-mode yes
port 6379
```

Смысл:

- bind 127.0.0.1 — принимать подключения только с локальной машины;
- protected-mode yes — включён защищённый режим, который запрещает опасные операции при подозрительной конфигурации.

Если нужно принимать подключения по сети, лучше явно указать адрес внутреннего интерфейса и защитить доступ firewall, VPN или отдельным уровнем прокси:

```
bind 10.0.0.10
protected-mode yes
```

Открывать Redis напрямую в интернет почти никогда не нужно и очень рискованно.

## Пароль и команда AUTH

Даже во внутренней сети стоит включить аутентификацию.

В конфиге:

```
requirepass "strong-password"
```

После этого любой клиент должен сначала аутентифицироваться:

```
AUTH strong-password
SET cache:page:/ "..."
```

Простые правила:

- использовать длинный случайный пароль;
- не хранить пароль в открытом виде в репозиториях;
- передавать пароль в переменных окружения или менеджере секретов.

Если требуется несколько ролей с разными правами, лучше использовать ACL, о которых пойдёт речь отдельно.

## Отключение опасных команд

На некоторых окружениях имеет смысл отключить команды, которые позволяют вызывать shell или управлять модулями.

Примеры:

```
rename-command FLUSHALL ""
rename-command FLUSHDB ""
rename-command CONFIG ""
rename-command SHUTDOWN ""
```

Пустая строка в качестве нового имени фактически отключает команду. Это не защита от всего, но позволяет случайно не стереть данные через FLUSHALL или не дать внешнему пользователю крутить CONFIG.

Важные моменты:

- такие настройки нужно хорошо документировать для команды;
- инструменты администрирования Redis должны учитывать, что некоторые команды переименованы или отключены.

## Итог

Базовая защита **Redis** — это в первую очередь про сетевую изоляцию, включённый protected-mode, адекватный bind и обязательную аутентификацию.

Если с самого начала ограничить доступ к серверу и отключить самые опасные команды в продакшене, риск случайных и умышленных проблем с безопасностью резко снижается даже до внедрения более сложных механизмов.


