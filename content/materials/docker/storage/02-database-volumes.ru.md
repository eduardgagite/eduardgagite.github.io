---
title: "Подключение томов к базе данных"
category: "docker"
categoryTitle: "Docker"
section: "storage"
sectionTitle: "Хранение данных"
sectionOrder: 5
order: 2
---

Самый частый кейс использования Volumes — это базы данных.
Давайте запустим Postgres так, чтобы данные не пропали после удаления контейнера.

## 1. Запуск без тома (ОШИБКА)

```
docker run -d --name pg-test -e POSTGRES_PASSWORD=secret postgres
```

Если вы сейчас создадите таблицу, а потом сделаете **docker rm -f pg-test**, данные исчезнут навсегда. Потому что Postgres хранит данные в папке **/var/lib/postgresql/data** **внутри** контейнера.

## 2. Запуск с именованным томом (ПРАВИЛЬНО)

Создадим том:

```
docker volume create pg-data
```

Запустим контейнер, подключив этот том:

```
docker run -d \
  --name pg-prod \
  -e POSTGRES_PASSWORD=secret \
  -v pg-data:/var/lib/postgresql/data \
  postgres
```

Теперь:
1. Зайдите в контейнер, создайте таблицу.
2. Удалите контейнер: **docker rm -f pg-prod**.
3. Запустите новый контейнер с **тем же томом** (**-v pg-data:...**).
4. Вуаля! Ваши данные на месте.

## Как посмотреть список томов

```
docker volume ls
```

## Как очистить неиспользуемые тома

Тома не удаляются автоматически, когда вы удаляете контейнер (чтобы вы случайно не потеряли данные).
Со временем они накапливаются.

Удалить конкретный том:

```
docker volume rm pg-data
```

⚠️ **Внимание:** Это необратимо удалит все данные базы!

Очистить все "повисшие" тома (которые не подключены ни к одному контейнеру):

```
docker volume prune
```

## Итого

Для любой базы данных (Postgres, MySQL, Mongo, Redis) **всегда** создавайте отдельный Volume. Это ваша страховка от потери данных.
