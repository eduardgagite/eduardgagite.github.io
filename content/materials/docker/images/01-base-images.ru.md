---
title: "Выбор базового образа: Alpine, Debian, Distroless"
category: "docker"
categoryTitle: "Docker"
section: "images"
sectionTitle: "Dockerfile и сборка образов"
sectionOrder: 4
order: 1
---

Любой Docker-образ начинается с инструкции **FROM**. Это фундамент.
Вы выбираете "родителя", на основе которого будете строить своё приложение.
Выбор базового образа критически влияет на **размер**, **безопасность** и **удобство отладки**.

## 1. Debian / Ubuntu (Full OS)

Это полноценные дистрибутивы Linux, упакованные в контейнер.
В них есть всё привычное: **apt**, **bash**, **curl**, **git**.

Пример: **FROM node:18** (часто основан на Debian).

**Плюсы:**
- Максимальная совместимость (glibc).
- Легко дебажить (есть все утилиты).
- Привычное окружение.

**Минусы:**
- Большой размер (сотни мегабайт).
- Много лишнего софта = больше потенциальных уязвимостей (CVE).

## 2. Alpine Linux

Сверхлегкий дистрибутив Linux (около 5 МБ). Использует библиотеку **musl** вместо **glibc**.
Стандарт де-факто для тех, кто гонится за минимальным размером.

Пример: **FROM node:18-alpine**.

**Плюсы:**
- Очень маленький размер образа.
- Меньше поверхность атаки.

**Минусы:**
- Использует **apk** вместо **apt**.
- Нет **glibc** (некоторые бинарные файлы могут не запуститься или работать медленно).
- Сложнее дебажить из-за урезанного набора утилит.

## 3. Distroless (Google)

Радикальный подход: в образе нет **ничего**, кроме вашего приложения и минимальных рантайм-зависимостей.
Там нет даже оболочки (**bash**, **sh**) и пакетного менеджера!

Пример: **gcr.io/distroless/nodejs:18**.

**Плюсы:**
- Идеальная безопасность (злоумышленник не сможет запустить shell, потому что его нет).
- Минимальный размер.

**Минусы:**
- Невозможно зайти внутрь через **docker exec** (нет шелла).
- Дебаг только через логи.

## Что выбрать?

1. **Для разработки:** Обычные образы (**node:18**, **python:3.9**) или Alpine. Вам нужны инструменты внутри.
2. **Для продакшена:**
   - Если важен размер и безопасность: **Alpine**.
   - Если паранойя безопасности максимальна: **Distroless**.
   - Если нужны специфичные C++ библиотеки: **Debian-slim**.

## Итого

- Всегда указывайте конкретные теги (**node:18-alpine**), а не **latest**.
- Начинайте с **alpine** версий. Если что-то не работает — переходите на **slim** (урезанный Debian).
- Используйте полные образы только если это действительно необходимо.
