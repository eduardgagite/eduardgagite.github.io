---
title: ".dockerignore и контекст сборки"
category: "docker"
categoryTitle: "Docker"
section: "images"
sectionTitle: "Dockerfile и сборка образов"
sectionOrder: 4
order: 4
---

Когда вы пишете `docker build .`, первое, что делает Docker CLI — это отправляет **весь контекст** (все файлы из текущей папки) демону Docker.

Если у вас в папке проекта лежит папка `node_modules` (300 МБ) или `.git` (100 МБ), Docker сначала "засосет" эти 400 МБ демону, и только потом начнет сборку. Это долго и тратит ресурсы.

Кроме того, если вы сделаете `COPY . .`, весь этот мусор попадет внутрь образа, раздувая его размер.

## Файл .dockerignore

Чтобы этого избежать, создайте в корне проекта файл `.dockerignore`. Он работает точно так же, как `.gitignore`.

Пример `.dockerignore` для JS проекта:
```text
node_modules
.git
.vscode
dist
build
*.md
docker-compose.yml
Dockerfile
.env
```

## Что это дает?

1. **Скорость:** `docker build` начинается мгновенно, так как контекст маленький.
2. **Безопасность:** Вы случайно не скопируете внутрь образа файл `.env` с паролями или папку `.git` с историей изменений.
3. **Размер:** Образ остается чистым, в нем только то, что нужно для запуска.

## Частая ошибка

Не путайте `.gitignore` и `.dockerignore`.
`.gitignore` говорит git-у не отслеживать файлы.
`.dockerignore` говорит docker-у не видеть файлы при сборке.

Обычно они похожи, но `.dockerignore` часто строже (например, мы игнорируем `Dockerfile` и `README.md`, которые в git-е нужны, а внутри контейнера — нет).

## Итого

Всегда создавайте `.dockerignore` в начале проекта. Это признак хорошего тона и профессионализма.

