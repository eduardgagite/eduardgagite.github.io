---
title: "Graceful Shutdown: сигналы SIGTERM/SIGKILL"
category: "docker"
categoryTitle: "Docker"
section: "basics"
sectionTitle: "Базовые команды и жизненный цикл"
sectionOrder: 3
order: 3
---

Когда вы пишете **docker stop**, контейнер останавливается не мгновенно. Docker ведет себя вежливо: он просит приложение завершиться самостоятельно.

## Как это работает

1. **docker stop** отправляет главному процессу контейнера (PID 1) сигнал **SIGTERM**.
2. У приложения есть время (по умолчанию 10 секунд), чтобы:
   - Дообработать текущие запросы.
   - Сохранить данные на диск.
   - Закрыть соединения с базой данных.
3. Если через 10 секунд приложение всё еще работает, Docker отправляет сигнал **SIGKILL**.
4. **SIGKILL** — это выстрел в голову. Процесс убивается мгновенно операционной системой, без возможности что-либо сохранить.

## Почему это важно знать?

Если ваше приложение "долго думает" при выключении (например, сохраняет большой дамп базы), стандартных 10 секунд может не хватить. Данные могут побиться.

Вы можете увеличить время ожидания флагом **-t** (timeout):

```
docker stop -t 30 my-app
```

## Команда docker kill

Если вы не хотите ждать и вам нужно убить контейнер прямо сейчас (аналог выдергивания вилки из розетки):

```
docker kill my-app
```
Это сразу отправляет **SIGKILL**. Используйте только в крайних случаях, когда приложение зависло намертво.

## Итого

- Всегда используйте **docker stop** для штатной остановки.
- Приложение должно уметь обрабатывать сигнал **SIGTERM** (большинство современных веб-серверов это умеют).
- Если приложение закрывается дольше 10 секунд, увеличьте таймаут или оптимизируйте код.
