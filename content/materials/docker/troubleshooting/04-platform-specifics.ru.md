---
title: "Docker на Windows/Mac: нюансы производительности"
category: "docker"
categoryTitle: "Docker"
section: "troubleshooting"
sectionTitle: "Типичные проблемы и решения"
sectionOrder: 10
order: 4
---

Docker — это технология Linux.
На Windows и macOS Docker не может работать нативно. Он запускает скрытую **виртуальную машину (Linux VM)** и работает в ней.

Это порождает ряд особенностей.

## 1. Медленная файловая система (Bind Mounts)

**Проблема:**
Вы разрабатываете Symfony/Laravel/Magento проект с тысячами файлов. На Linux страницы грузятся за 200мс. На Mac с Docker Desktop — за 5 секунд.

**Причина:**
Проброс файлов с хоста (macOS/Win) в Linux VM через **Bind Mounts** (**-v $(pwd):/app**) — это очень дорогая операция. Каждое чтение файла проходит через прослойку виртуализации (gRPC/FUSE).

**Решение:**
1. **VirtioFS (для Mac):** В настройках Docker Desktop включите **Use VirtioFS**. Это ускоряет работу в разы.
2. **WSL 2 (для Windows):** Используйте WSL 2 бэкенд. Храните код проекта **внутри** файловой системы Linux (**\\wsl$\Ubuntu\home\user\project**), а не на диске **C:\**. Скорость будет нативной.
3. **Не монтируйте лишнего:** Исключайте **node_modules** или **vendor** из bind mount (используйте volume trick), чтобы Docker не синхронизировал эти папки с хостом.

## 2. Потребление памяти

**Проблема:**
Docker Desktop жрет 4-8 ГБ RAM, даже если контейнеры ничего не делают.

**Причина:**
Виртуальная машина резервирует память заранее.

**Решение:**
В настройках Docker Desktop (Resources) ограничьте Memory Limit (например, 4 ГБ). Больше этого значения VM не возьмет.

## 3. Host Networking

Режим **--network host** работает **только на Linux**.
На Mac/Win вы не можете обратиться к контейнеру по IP-адресу контейнера. Только через **localhost** и проброшенные порты (**-p**).

## Итого

Если нужен максимальный перформанс — используйте Linux.
Если сидите на Mac/Win:
- Mac: Включите VirtioFS.
- Windows: Используйте WSL 2 и храните код там.
